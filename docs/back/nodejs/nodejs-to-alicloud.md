---
title: nodejs项目部署到云服务器（完整教程）
description: nodejs项目部署到云服务器（完整教程）
meta:
  - name: keywords
    content: nodejs 云服务器
---
## nodejs项目部署到云服务器（完整教程）
提前购买好云服务器，和搭建服务器环境和nodejs项目
- 使用宝塔面板搭建云服务器:[【官方教程】宝塔Linux面板安装教程](https://www.bt.cn/bbs/thread-19376-1-1.html)
- nodejs项目
- 前端项目（点击跳转：[前端项目部署到云服务器已有教程](/front/vuepress/vuepress项目上传到阿里云服务器.md)）

## 1、nodejs项目上传到宝塔面板
先忽略nodejs项目的node_modules依赖包，依赖文件太大了，上传不支持；

然后，把nodejs项目上传到宝塔面板文件目录下-/www/wwwroot

也可以把依赖包压缩了再上传；我这里选择上传后，进入项目文件夹，点击终端，用npm install命令下载依赖包；

![](@alias/1683991982437.jpg)

![](@alias/1683991662342.jpg)

## 2、添加node项目
在网站菜单下打开Node项目页面，点击添加Node项目；

记得nodejs端口号以及nodejs版本号都必须一致，不要搞错了，不然后面跑不起来。
![](@alias/e05d471b45a905e0629b16e475eba58.png)

## 3、新建mysql数据库
在数据库菜单下打开MySQL，点击添加数据库；

【数据库名】，【用户名】和【密码】记下来，配置nodejs链接数据库会用到！
我这里的数据库名为 blog , 用户名 blog , 密码***
![](@alias/1683992690936.jpg)
新建数据库成功后，点击数据库的管理，打开数据库；
![](@alias/1683992849732.jpg)
打开数据库后，把nodejs项目需要访问的数据库和表，以及表数据，通过sql插进来；
![](@alias/1683993028249.jpg)
在navicat里把表数据导出成sql文件；再在宝塔面板的数据库执行sql文件，把数据导进来；或者直接执行sql;
![](@alias/1683993113219.jpg)
![](@alias/1683993276973.jpg)

到这里宝塔面板的数据库、nodejs项目都已经搭建好了！

下面是最重要的配置了，一定要认真配置。

## 4、前端项目的接口ip地址修改
我的前端vuepress项目和后端nodejs项目，都上传到了宝塔面板上；

前端项目想要调宝塔面板上的nodejs项目的接口，则需要把接口的ip地址修改为【云服务器（也就是宝塔面板）ip地址:端口号(node服务器的端口号)】

举个例子，前端项目调GET接口 http://云服务器ip地址:node端口号/music/list;

## 5、nodejs项目修改数据库链接信息
在宝塔上直接打开node项目，找到数据库链接的文件，我的项目是db/index.js；

双击index.js文件打开, 把之前链接本地数据库的信息修改为链接宝塔面板数据库的信息，保存。
![](@alias/1683994110157.jpg)
如果忘记了数据库名，用户名和密码，可以回菜单打开数据库，查看密码，数据库以及用户名
![](@alias/1683994223506.jpg)

## 6、宝塔面板开放端口
一定要记得在宝塔面板上开放数据库端口3306 和 nodejs项目端口；

否则就算nodejs项目跑起来了，调接口的时候找不到端口，会直接强制关闭nodejs项目的运行！接口报错 Error:connect ECONNREFUSED ip:端口
![](@alias/1683994393353.jpg)

## 7、阿里云服务器上开放端口
我购买的服务器是阿里云服务器，记得一定要记得阿里云的服务器上也要开放node项目访问端口；

不然nodejs项目启动项目，会访问不了nodejs项目（报500还是403来着，我有点忘记了）

打开云服务器端口号和面板端口号后，成功访问nodejs项目；
![](@alias/1683995060023.jpg)

通过postman测试调宝塔面板nodejs项目的接口，成功获取了！
![](@alias/1683995287175.jpg)

## 小坑集合

## 8、上传node项目使用PM2管理器大坑
我在网上搜了一大堆宝塔面板上传node项目的教程，大部分文章都推荐使用PM2管理器；

那些文件应该是很早之前的，现在不要使用PM2管理器了！！！，官方已经不再维护，完全跑不起来node项目！

直接使用【Node.js版本管理器】就好了，记得下载完成后下载对应的node版本
![](@alias/1683995542760.jpg)

命令行版本一定都勾选下载好的版本号，不然不会生效！
![](@alias/1683995637242.jpg)
